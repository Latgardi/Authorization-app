<?phprequire_once "utils/DataUtil.php";require_once "auth/Authentication.php";require_once 'models/User.php';use Auth\Authentication;use Utils\DataUtil;session_start();const INDEX_URI = '/';const ABOUT_URI = '/about';const LOGIN_URI = '/login';const REGISTER_URI = '/register';const LOGOUT_URI = '/logout';define("CURRENT_USER_NAME", $_SESSION['name'] ?? null);const CONSTS = array('INDEX_URI' => INDEX_URI, 'ABOUT_URI' => ABOUT_URI,    'LOGIN_URI' => LOGIN_URI, 'REGISTER_URI' => REGISTER_URI,    'LOGOUT_URI' => LOGOUT_URI, 'CURRENT_USER_NAME' => CURRENT_USER_NAME);$blade = require 'blade.php';if (isset($_COOKIE['auth'])){    $_SESSION = $_COOKIE;}if (!empty($_POST)){    if (isset($_POST['action']) and $_POST['action'] == REGISTER_URI)    {        $user = new User($_POST['login'], $_POST['password'], $_POST['confirm'],            $_POST['email'], $_POST['name'], Null);        $response = Authentication::buildRegistrationResponse($user);        if ($response['success']) Authentication::registerUser($user);        echo $response['response'];    }    if (isset($_POST['action']) and $_POST['action'] == LOGIN_URI)    {        $user = new User($_POST['login'], $_POST['password']);        $response = Authentication::buildLoginResponse($user);        if ($response['success']) Authentication::loginUser($user);        echo $response['response'];    }}if ($_SERVER['REQUEST_URI'] == INDEX_URI) echo $blade->run("index", CONSTS);if ($_SERVER['REQUEST_URI'] == ABOUT_URI) echo $blade->run("about", CONSTS);if ($_SERVER['REQUEST_URI'] == LOGIN_URI) echo $blade->run("login", CONSTS);if ($_SERVER['REQUEST_URI'] == REGISTER_URI) echo $blade->run("register", CONSTS);if ($_SERVER['REQUEST_URI'] == LOGOUT_URI) Authentication::logout();